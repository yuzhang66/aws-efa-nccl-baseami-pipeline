2021/09/14 22:03:12 [INFO] Packer version: 1.6.6 [go1.15.6 linux amd64]
2021/09/14 22:03:12 Checking 'PACKER_CONFIG' for a config file path
2021/09/14 22:03:12 'PACKER_CONFIG' not set; checking the default config file path
2021/09/14 22:03:12 Attempting to open config file: /home/ec2-user/.packerconfig
2021/09/14 22:03:12 [WARN] Config file doesn't exist: /home/ec2-user/.packerconfig
2021/09/14 22:03:12 Setting cache directory: /home/ec2-user/aws-efa-nccl-baseami-pipeline/nvidia-efa-ami_base/packer_cache
2021/09/14 22:03:12 Creating plugin client for path: /usr/bin/packer
2021/09/14 22:03:12 Starting plugin: /usr/bin/packer []string{"/usr/bin/packer", "plugin", "packer-builder-amazon-ebs"}
2021/09/14 22:03:12 Waiting for RPC address for: /usr/bin/packer
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: [INFO] Packer version: 1.6.6 [go1.15.6 linux amd64]
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: Checking 'PACKER_CONFIG' for a config file path
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: 'PACKER_CONFIG' not set; checking the default config file path
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: Attempting to open config file: /home/ec2-user/.packerconfig
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: [WARN] Config file doesn't exist: /home/ec2-user/.packerconfig
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: Setting cache directory: /home/ec2-user/aws-efa-nccl-baseami-pipeline/nvidia-efa-ami_base/packer_cache
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: args: []string{"packer-builder-amazon-ebs"}
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: Plugin address: unix /tmp/packer-plugin365969360
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: Waiting for connection...
2021/09/14 22:03:12 Received unix RPC address for /usr/bin/packer: addr is /tmp/packer-plugin365969360
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: Serving a plugin connection...
2021/09/14 22:03:12 Creating plugin client for path: /usr/bin/packer
2021/09/14 22:03:12 Starting plugin: /usr/bin/packer []string{"/usr/bin/packer", "plugin", "packer-provisioner-shell"}
2021/09/14 22:03:12 Waiting for RPC address for: /usr/bin/packer
2021/09/14 22:03:12 packer-provisioner-shell plugin: [INFO] Packer version: 1.6.6 [go1.15.6 linux amd64]
2021/09/14 22:03:12 packer-provisioner-shell plugin: Checking 'PACKER_CONFIG' for a config file path
2021/09/14 22:03:12 packer-provisioner-shell plugin: 'PACKER_CONFIG' not set; checking the default config file path
2021/09/14 22:03:12 packer-provisioner-shell plugin: Attempting to open config file: /home/ec2-user/.packerconfig
2021/09/14 22:03:12 packer-provisioner-shell plugin: [WARN] Config file doesn't exist: /home/ec2-user/.packerconfig
2021/09/14 22:03:12 packer-provisioner-shell plugin: Setting cache directory: /home/ec2-user/aws-efa-nccl-baseami-pipeline/nvidia-efa-ami_base/packer_cache
2021/09/14 22:03:12 packer-provisioner-shell plugin: args: []string{"packer-provisioner-shell"}
2021/09/14 22:03:12 packer-provisioner-shell plugin: Plugin address: unix /tmp/packer-plugin333882365
2021/09/14 22:03:12 Received unix RPC address for /usr/bin/packer: addr is /tmp/packer-plugin333882365
2021/09/14 22:03:12 packer-provisioner-shell plugin: Waiting for connection...
2021/09/14 22:03:12 packer-provisioner-shell plugin: Serving a plugin connection...
2021/09/14 22:03:12 Creating plugin client for path: /usr/bin/packer
2021/09/14 22:03:12 Starting plugin: /usr/bin/packer []string{"/usr/bin/packer", "plugin", "packer-provisioner-shell"}
2021/09/14 22:03:12 Waiting for RPC address for: /usr/bin/packer
2021/09/14 22:03:12 packer-provisioner-shell plugin: [INFO] Packer version: 1.6.6 [go1.15.6 linux amd64]
2021/09/14 22:03:12 packer-provisioner-shell plugin: Checking 'PACKER_CONFIG' for a config file path
2021/09/14 22:03:12 packer-provisioner-shell plugin: 'PACKER_CONFIG' not set; checking the default config file path
2021/09/14 22:03:12 packer-provisioner-shell plugin: Attempting to open config file: /home/ec2-user/.packerconfig
2021/09/14 22:03:12 packer-provisioner-shell plugin: [WARN] Config file doesn't exist: /home/ec2-user/.packerconfig
2021/09/14 22:03:12 packer-provisioner-shell plugin: Setting cache directory: /home/ec2-user/aws-efa-nccl-baseami-pipeline/nvidia-efa-ami_base/packer_cache
2021/09/14 22:03:12 packer-provisioner-shell plugin: args: []string{"packer-provisioner-shell"}
2021/09/14 22:03:12 packer-provisioner-shell plugin: Plugin address: unix /tmp/packer-plugin487635399
2021/09/14 22:03:12 packer-provisioner-shell plugin: Waiting for connection...
2021/09/14 22:03:12 Received unix RPC address for /usr/bin/packer: addr is /tmp/packer-plugin487635399
2021/09/14 22:03:12 packer-provisioner-shell plugin: Serving a plugin connection...
2021/09/14 22:03:12 Creating plugin client for path: /usr/bin/packer
2021/09/14 22:03:12 Starting plugin: /usr/bin/packer []string{"/usr/bin/packer", "plugin", "packer-provisioner-shell"}
2021/09/14 22:03:12 Waiting for RPC address for: /usr/bin/packer
2021/09/14 22:03:12 packer-provisioner-shell plugin: [INFO] Packer version: 1.6.6 [go1.15.6 linux amd64]
2021/09/14 22:03:12 packer-provisioner-shell plugin: Checking 'PACKER_CONFIG' for a config file path
2021/09/14 22:03:12 packer-provisioner-shell plugin: 'PACKER_CONFIG' not set; checking the default config file path
2021/09/14 22:03:12 packer-provisioner-shell plugin: Attempting to open config file: /home/ec2-user/.packerconfig
2021/09/14 22:03:12 packer-provisioner-shell plugin: [WARN] Config file doesn't exist: /home/ec2-user/.packerconfig
2021/09/14 22:03:12 packer-provisioner-shell plugin: Setting cache directory: /home/ec2-user/aws-efa-nccl-baseami-pipeline/nvidia-efa-ami_base/packer_cache
2021/09/14 22:03:12 packer-provisioner-shell plugin: args: []string{"packer-provisioner-shell"}
2021/09/14 22:03:12 packer-provisioner-shell plugin: Plugin address: unix /tmp/packer-plugin907000316
2021/09/14 22:03:12 packer-provisioner-shell plugin: Waiting for connection...
2021/09/14 22:03:12 Received unix RPC address for /usr/bin/packer: addr is /tmp/packer-plugin907000316
2021/09/14 22:03:12 packer-provisioner-shell plugin: Serving a plugin connection...
2021/09/14 22:03:12 Preparing build: amazon-ebs
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: [INFO] (aws): No AWS timeout and polling overrides have been set. Packer will default to waiter-specific delays and timeouts. If you would like to customize the length of time between retries and max number of retries you may do so by setting the environment variables AWS_POLL_DELAY_SECONDS and AWS_MAX_ATTEMPTS or the configuration options aws_polling_delay_seconds and aws_polling_max_attempts to your desired values.
2021/09/14 22:03:12 ui: [1;32mamazon-ebs: output will be in this color.[0m
2021/09/14 22:03:12 ui: 
2021/09/14 22:03:12 Build debug mode: false
2021/09/14 22:03:12 Force build: false
2021/09/14 22:03:12 On error: 
2021/09/14 22:03:12 Waiting on builds to complete...
2021/09/14 22:03:12 Starting build run: amazon-ebs
2021/09/14 22:03:12 Running builder: amazon-ebs
2021/09/14 22:03:12 [INFO] (telemetry) Starting builder amazon-ebs
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: [INFO] AWS Auth provider used: "SharedCredentialsProvider"
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: Found region us-east-1
2021/09/14 22:03:12 packer-builder-amazon-ebs plugin: [INFO] AWS Auth provider used: "SharedCredentialsProvider"
2021/09/14 22:03:12 ui: [1;32m==> amazon-ebs: Prevalidating any provided VPC information[0m
2021/09/14 22:03:12 ui: [1;32m==> amazon-ebs: Prevalidating AMI Name: al2-fpga-test-ami_eks-1.19-1631656992[0m
2021/09/14 22:03:13 packer-builder-amazon-ebs plugin: Using AMI Filters {
2021/09/14 22:03:13 packer-builder-amazon-ebs plugin:   ImageIds: ["ami-09d5097f0b2e9bc30"]
2021/09/14 22:03:13 packer-builder-amazon-ebs plugin: }
2021/09/14 22:03:13 ui: [0;32m    amazon-ebs: Found Image ID: ami-09d5097f0b2e9bc30[0m
2021/09/14 22:03:13 packer-builder-amazon-ebs plugin: [INFO] Finding AZ and VpcId for the given subnet 'subnet-9c36a2fa'
2021/09/14 22:03:13 packer-builder-amazon-ebs plugin: [INFO] AvailabilityZone found: 'us-east-1a'
2021/09/14 22:03:13 packer-builder-amazon-ebs plugin: [INFO] VpcId found: 'vpc-231ebe5e'
2021/09/14 22:03:13 ui: [1;32m==> amazon-ebs: Creating temporary keypair: packer_61411c20-0fff-09c4-edf9-f5f5dcb0969d[0m
2021/09/14 22:03:14 packer-builder-amazon-ebs plugin: Using specified security groups: [sg-01bdad9fe532188a0 sg-42c7a849]
2021/09/14 22:03:14 ui: [1;32m==> amazon-ebs: Launching a source AWS instance...[0m
2021/09/14 22:03:14 ui: [1;32m==> amazon-ebs: Adding tags to source instance[0m
2021/09/14 22:03:14 ui: [0;32m    amazon-ebs: Adding tag: "Name": "packer-gpu-processor-eks-1.19"[0m
2021/09/14 22:03:15 ui: [0;32m    amazon-ebs: Instance ID: i-0873f637963a9e872[0m
2021/09/14 22:03:15 ui: [1;32m==> amazon-ebs: Waiting for instance (i-0873f637963a9e872) to become ready...[0m
2021/09/14 22:03:24 packer-provisioner-shell plugin: Received interrupt signal (count: 1). Ignoring.
2021/09/14 22:03:24 ui error: Cancelling build after receiving interrupt
2021/09/14 22:03:24 packer-provisioner-shell plugin: Received interrupt signal (count: 1). Ignoring.
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: Received interrupt signal (count: 1). Ignoring.
2021/09/14 22:03:24 Cancelling builder after context cancellation context canceled
2021/09/14 22:03:24 packer-provisioner-shell plugin: Received interrupt signal (count: 1). Ignoring.
2021/09/14 22:03:24 ui error: [1;31m==> amazon-ebs: Error waiting for instance (i-0873f637963a9e872) to become ready: RequestCanceled: waiter context canceled
==> amazon-ebs: caused by: context canceled[0m
2021/09/14 22:03:24 ui: [1;32m==> amazon-ebs: No volumes to clean up, skipping[0m
2021/09/14 22:03:24 ui: [1;32m==> amazon-ebs: Deleting temporary keypair...[0m
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: panic: runtime error: invalid memory address or nil pointer dereference
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: [signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0x1a719e1]
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: 
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: goroutine 111 [running]:
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: github.com/hashicorp/packer/builder/amazon/common.(*StepRunSourceInstance).Run(0xc0005f69a0, 0x53d07c0, 0xc0005ee040, 0x53d1400, 0xc0005dc7e0, 0x0)
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: 	/home/circleci/project/packer/builder/amazon/common/step_run_source_instance.go:254 +0x16a1
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: github.com/hashicorp/packer/packer-plugin-sdk/multistep.(*BasicRunner).Run(0xc0005dc8d0, 0x53d07c0, 0xc0005ee040, 0x53d1400, 0xc0005dc7e0)
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: 	/home/circleci/project/packer/packer-plugin-sdk/multistep/basic_runner.go:70 +0x234
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: github.com/hashicorp/packer/builder/amazon/ebs.(*Builder).Run(0xc000484d00, 0x53d07c0, 0xc0005ee040, 0x53ebac0, 0xc0005dc1b0, 0x535b8e0, 0xc0002a00e0, 0x0, 0xc000514638, 0xc0005d8bd0, ...)
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: 	/home/circleci/project/packer/builder/amazon/ebs/builder.go:354 +0x194b
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: github.com/hashicorp/packer/packer-plugin-sdk/rpc.(*BuilderServer).Run(0xc00051e040, 0x1, 0xc0000762b0, 0x0, 0x0)
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: 	/home/circleci/project/packer/packer-plugin-sdk/rpc/builder.go:117 +0x1c4
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: reflect.Value.call(0xc000514600, 0xc0005202a0, 0x13, 0x4d6ecf8, 0x4, 0xc0005d8f08, 0x3, 0x3, 0x4ea7bf0, 0xc00008e000, ...)
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: 	/usr/local/go/src/reflect/value.go:476 +0x8c7
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: reflect.Value.Call(0xc000514600, 0xc0005202a0, 0x13, 0xc000e6b708, 0x3, 0x3, 0xc000683ab8, 0xc00081cb30, 0x4609c0)
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: 	/usr/local/go/src/reflect/value.go:337 +0xb9
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: net/rpc.(*service).call(0xc00051e900, 0xc0002de0a0, 0xc0002385d0, 0xc0002385e0, 0xc00052a280, 0xc000363120, 0x3edd4e0, 0xc0000762ac, 0x18a, 0x3ddf6a0, ...)
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: 	/usr/local/go/src/net/rpc/server.go:377 +0x189
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: created by net/rpc.(*Server).ServeCodec
2021/09/14 22:03:24 packer-builder-amazon-ebs plugin: 	/usr/local/go/src/net/rpc/server.go:474 +0x445
2021/09/14 22:03:24 [INFO] (telemetry) ending amazon-ebs
2021/09/14 22:03:24 ui error: [1;31mBuild 'amazon-ebs' errored after 11 seconds 863 milliseconds: unexpected EOF[0m
2021/09/14 22:03:24 /usr/bin/packer: plugin process exited
2021/09/14 22:03:24 ui: 
==> Wait completed after 11 seconds 863 milliseconds
2021/09/14 22:03:24 ui: Cleanly cancelled builds after being interrupted.
2021/09/14 22:03:24 [INFO] (telemetry) Finalizing.
2021/09/14 22:03:24 waiting for all plugin processes to complete...
2021/09/14 22:03:24 /usr/bin/packer: plugin process exited
2021/09/14 22:03:24 /usr/bin/packer: plugin process exited
2021/09/14 22:03:24 /usr/bin/packer: plugin process exited
